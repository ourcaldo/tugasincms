Run docker/build-push-action@v5
GitHub Actions runtime token ACs
Docker info
Proxy configuration
Buildx version
Builder info
/usr/bin/docker buildx build --build-arg NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY= --build-arg CLERK_SECRET_KEY= --build-arg NEXT_PUBLIC_SUPABASE_URL= --build-arg NEXT_PUBLIC_SUPABASE_ANON_KEY= --build-arg NEXT_PUBLIC_APPWRITE_ENDPOINT= --build-arg NEXT_PUBLIC_APPWRITE_PROJECT_ID= --build-arg NEXT_PUBLIC_BUCKET_ID= --cache-from type=gha --cache-to type=gha,mode=max --iidfile /home/runner/work/_temp/docker-actions-toolkit-bpbtU2/build-iidfile-06b03e7b6f.txt --label org.opencontainers.image.created=2025-10-01T20:25:52.611Z --label org.opencontainers.image.description= --label org.opencontainers.image.licenses= --label org.opencontainers.image.revision=0cc6354736139947c312f63edd01929349909687 --label org.opencontainers.image.source=https://github.com/ourcaldo/tugasincms --label org.opencontainers.image.title=tugasincms --label org.opencontainers.image.url=https://github.com/ourcaldo/tugasincms --label org.opencontainers.image.version=main --attest type=provenance,mode=max,builder-id=https://github.com/ourcaldo/tugasincms/actions/runs/18174671007 --tag ghcr.io/ourcaldo/tugasincms:main --tag ghcr.io/ourcaldo/tugasincms:latest --metadata-file /home/runner/work/_temp/docker-actions-toolkit-bpbtU2/build-metadata-d62869a16a.json --push .
#0 building with "builder-39688644-913b-4374-826a-f479934c50ab" instance using docker-container driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 942B done
#1 DONE 0.0s

#2 [auth] library/node:pull token for registry-1.docker.io
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-alpine
#3 DONE 0.5s

#4 [internal] load .dockerignore
#4 transferring context: 166B done
#4 DONE 0.0s

#5 [internal] load build context
#5 DONE 0.0s

#6 [1/6] FROM docker.io/library/node:20-alpine@sha256:eabac870db94f7342d6c33560d6613f188bbcf4bbe1f4eb47d5e2a08e1a37722
#6 resolve docker.io/library/node:20-alpine@sha256:eabac870db94f7342d6c33560d6613f188bbcf4bbe1f4eb47d5e2a08e1a37722 done
#6 DONE 0.0s

#7 importing cache manifest from gha:11374328980358551553
#7 DONE 0.2s

#5 [internal] load build context
#5 transferring context: 3.66MB 0.1s done
#5 DONE 0.1s

#8 [2/6] WORKDIR /app
#8 CACHED

#8 [2/6] WORKDIR /app
#8 sha256:0de821d16564893ff12fae9499550711d92157ed1e6705a8c7f7e63eac0a2bb9 449B / 449B 0.1s done
#8 sha256:9f6fd785c9653764b1e9f77664b4f96b925955b2e1519b7066f358a4a61ee59c 93B / 93B 0.1s done
#8 sha256:fd345d7e43c58474c833bee593321ab1097dd720bebd8032e75fbf5b81b1e554 0B / 1.26MB 0.2s
#8 sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 0B / 42.75MB 0.2s
#8 sha256:9824c27679d3b27c5e1cb00a73adb6f4f8d556994111c12db3c5d61a0c843df8 0B / 3.80MB 0.2s
#8 sha256:fd345d7e43c58474c833bee593321ab1097dd720bebd8032e75fbf5b81b1e554 1.26MB / 1.26MB 0.3s done
#8 sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 5.24MB / 42.75MB 0.5s
#8 sha256:9824c27679d3b27c5e1cb00a73adb6f4f8d556994111c12db3c5d61a0c843df8 1.05MB / 3.80MB 0.5s
#8 sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 12.58MB / 42.75MB 0.6s
#8 sha256:9824c27679d3b27c5e1cb00a73adb6f4f8d556994111c12db3c5d61a0c843df8 3.15MB / 3.80MB 0.6s
#8 sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 33.55MB / 42.75MB 0.9s
#8 sha256:9824c27679d3b27c5e1cb00a73adb6f4f8d556994111c12db3c5d61a0c843df8 3.80MB / 3.80MB 0.6s done
#8 extracting sha256:9824c27679d3b27c5e1cb00a73adb6f4f8d556994111c12db3c5d61a0c843df8 0.1s done
#8 sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 42.75MB / 42.75MB 1.0s done
#8 DONE 1.1s

#8 [2/6] WORKDIR /app
#8 extracting sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82
#8 extracting sha256:c88300f8759af46375ccc157a0a0dbf7cdaeded52394b5ce2ce074e3b773fe82 0.9s done
#8 DONE 2.0s

#8 [2/6] WORKDIR /app
#8 extracting sha256:fd345d7e43c58474c833bee593321ab1097dd720bebd8032e75fbf5b81b1e554 0.0s done
#8 extracting sha256:0de821d16564893ff12fae9499550711d92157ed1e6705a8c7f7e63eac0a2bb9 done
#8 extracting sha256:9f6fd785c9653764b1e9f77664b4f96b925955b2e1519b7066f358a4a61ee59c done
#8 DONE 2.0s

#9 [3/6] COPY package*.json ./
#9 DONE 0.1s

#10 [4/6] RUN npm ci
#10 10.52 
#10 10.52 added 334 packages, and audited 335 packages in 10s
#10 10.52 
#10 10.52 63 packages are looking for funding
#10 10.52   run `npm fund` for details
#10 10.52 
#10 10.52 found 0 vulnerabilities
#10 10.53 npm notice
#10 10.53 npm notice New major version of npm available! 10.8.2 -> 11.6.1
#10 10.53 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.1
#10 10.53 npm notice To update run: npm install -g npm@11.6.1
#10 10.53 npm notice
#10 DONE 12.3s

#11 [5/6] COPY . .
#11 DONE 0.2s

#12 [6/6] RUN npm run build
#12 0.193 
#12 0.193 > Build Professional CMS@0.1.0 build
#12 0.193 > next build
#12 0.193 
#12 0.884 Attention: Next.js now collects completely anonymous telemetry regarding usage.
#12 0.885 This information is used to shape Next.js' roadmap and prioritize features.
#12 0.885 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#12 0.885 https://nextjs.org/telemetry
#12 0.885 
#12 0.944    ▲ Next.js 15.5.4
#12 0.944    - Experiments (use with caution):
#12 0.944      · serverActions
#12 0.944 
#12 1.063    Creating an optimized production build ...
#12 15.41 <w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (175kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
#12 24.75  ✓ Compiled successfully in 20.7s
#12 24.75    Skipping linting
#12 24.75    Checking validity of types ...
#12 31.94    Collecting page data ...
#12 34.93    Generating static pages (0/15) ...
#12 35.53    Generating static pages (3/15) 
#12 35.53    Generating static pages (7/15) 
#12 36.01 Error occurred prerendering page "/posts/new". Read more: https://nextjs.org/docs/messages/prerender-error
#12 36.01 Error: @clerk/clerk-react: Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.
#12 36.01     at Object.throwMissingPublishableKeyError (.next/server/chunks/278.js:9:3088)
#12 36.01     at <unknown> (.next/server/chunks/278.js:44:73909) {
#12 36.01   digest: '2357090640'
#12 36.01 }
#12 36.01 Export encountered an error on /(dashboard)/posts/new/page: /posts/new, exiting the build.
#12 36.01  ⨯ Next.js build worker exited with code: 1 and signal: null
#12 ERROR: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
------
 > [6/6] RUN npm run build:
35.53    Generating static pages (3/15) 
35.53    Generating static pages (7/15) 
36.01 Error occurred prerendering page "/posts/new". Read more: https://nextjs.org/docs/messages/prerender-error
36.01 Error: @clerk/clerk-react: Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.
36.01     at Object.throwMissingPublishableKeyError (.next/server/chunks/278.js:9:3088)
36.01     at <unknown> (.next/server/chunks/278.js:44:73909) {
36.01   digest: '2357090640'
36.01 }
36.01 Export encountered an error on /(dashboard)/posts/new/page: /posts/new, exiting the build.
36.01  ⨯ Next.js build worker exited with code: 1 and signal: null
------

 2 warnings found (use docker --debug to expand):
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "CLERK_SECRET_KEY") (line 22)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "CLERK_SECRET_KEY") (line 12)
Dockerfile:31
--------------------
  29 |     # Note: Redis and other runtime-only vars are set in docker-compose.yml or at container runtime
  30 |     
  31 | >>> RUN npm run build
  32 |     
  33 |     EXPOSE 5000
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
Error: buildx failed with: ERROR: failed to build: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1